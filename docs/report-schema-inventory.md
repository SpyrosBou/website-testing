# Report Schema Inventory (Phase 1)

Captured on the `reporting-redesign` feature branch as part of Phase 1 of the roadmap audit. This inventory lists every spec that currently emits `codex.report.summary` payloads, the fields we observed on the run / page payloads, and notable gaps against the approved mock requirements (gating + warnings + advisories + notes + artifacts).

| Spec (file) | Run payload highlights | Page payload highlights | Observed gaps / follow‑ups |
| --- | --- | --- | --- |
| `tests/a11y.audit.wcag.spec.js` | `overview` exposes totals for gating/advisory/best-practice counts, `details.pages` include per-page violation/advisory/best-practice arrays plus `notes` and viewports. Run payload also attaches aggregated violation snapshots and metadata (`failOn`, `scope`, `suppressPageEntries`). | Per-page payloads include `gatingViolations`, `advisoriesList`, `bestPracticesList`, `notes`, per-node snapshots, and stability/http status metadata. | Naming already aligns with “Gating WCAG violations”. No gaps noted. |
| `tests/a11y.forms.validation.spec.js` | `overview` tracks totals for gating/advisory findings and forms. `details.forms` now surface `gating`, `advisories`, field-level issues, and notes about selector coverage. | Per-form payload uses `gatingIssues`, `advisories`, `fields`, and `notes` collections. | ✅ Notes capture coverage context; no further action. |
| `tests/a11y.keyboard.navigation.spec.js` | `overview` reports counts for gating/advisories/skip links. `details.pages` include `gating`, `advisories`, focus sequence data, WCAG references, and notes describing traversal depth/skip links. | Page payload provides `gatingIssues`, `advisories`, focus counts, skip link info, and notes. | ✅ Structured for reporter templates. |
| `tests/a11y.resilience.adaptive.spec.js` | Reduced motion, reflow, and iframe audits emit run payloads with `gating`, `advisories`, and scenario notes (animation counts, overflow px, iframe mix). | Page payloads surface `gatingIssues`, `advisories`, scenario findings, and notes for analytics. | ✅ Structured; no gaps. |
| `tests/a11y.structure.landmarks.spec.js` | `overview` counts gating/advisory totals and missing landmarks; `details.pages` expose `gating`, `advisories`, heading data, and outline notes. | Page payload carries `gatingIssues`, `advisories`, heading outline, and notes on outline depth/skip counts. | ✅ Structured; no gaps. |
| `tests/functionality.infrastructure.health.spec.js` | Availability/HTTP/Performance runs expose `gating`, `warnings`, `advisories`, and `notes` alongside metrics (`failedChecks`, `budgetBreaches`). | Page payload mirrors the normalised fields with existing metrics retained. | ✅ Normalised. |
| `tests/functionality.interactive.smoke.spec.js` | `overview` reports console/resource totals plus gating/warning counts; `details.pages` enumerate gating strings, warning notes, and console/resource tallies. | Page payload exports `gating`, `warnings`, `notes`, and sampled console/resource artifacts. | ✅ Normalised (console/resource failures filed as gating issues). |
| `tests/functionality.links.internal.spec.js` | `overview` exposes total links/broken counts and pages with gating issues; `details.pages` provide gating narratives and sampling notes. | Page payload supplies counts, gating notes, and broken link samples. | ✅ Normalised. |
| `tests/responsive.layout.structure.spec.js` | Responsive structure/WP runs emit `gating`, `warnings`, `advisories`, `notes`, and structure metrics; overview counts gating/warning pages. | Page payloads mirror the normalised fields plus load/structure metrics. | ✅ Normalised. |
| `tests/visual.regression.snapshots.spec.js` | Run payload `overview` tracks pass/diff counts, gating totals, thresholds, and max delta percent; `details.pages` expose `gating`, `notes`, delta percentages, and artifact refs. | Page payload includes diff metrics, artifact names, gating arrays, and notes for passes/diffs. | ✅ Normalised; artifacts and delta percentages ready for templates. |

### Key takeaways

- Every schema payload now emits the standard `gating`/`warnings`/`advisories`/`notes` fields, so reporter templates can render a unified layout without per-spec exceptions.
- Visual regression payloads surface delta percentages and artifact references at both run and page levels, mirroring the approved mock requirements.
- Although the normalisation is complete, we should extract a shared classification helper (rather than bespoke per-spec mappings) and codify the contract with unit tests in Phase 3.
