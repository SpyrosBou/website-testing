# Test Category Template
# This template defines the structure for test category specifications

metadata:
  category: "category-name"
  version: "1.0.0"
  description: "Brief description of what this category tests"
  priority: "high|medium|low"
  dependencies: []  # List of required categories/utilities
  tags:
    - "reporting-epic-tag"
    - "test-type-tag"

configuration:
  timeout: 30000  # Default timeout in milliseconds
  retries: 2      # Number of retries for flaky operations
  parallel: true  # Whether tests can run in parallel
  browsers: ["chrome", "firefox", "safari"]  # Supported browsers
  viewports:      # Optional viewport requirements
    - name: "desktop"
      width: 1920
      height: 1080
    - name: "tablet" 
      width: 768
      height: 1024
    - name: "mobile"
      width: 375
      height: 667

test_cases:
  - name: "test-case-name"
    description: "What this test case validates"
    priority: "critical|high|medium|low"
    reporting:
      epic: "Test Epic Name"
      feature: "Specific Feature"
      story: "User Story"
      severity: "critical|normal|minor|trivial"
    
    setup:
      - action: "navigate"
        target: "{{baseUrl}}{{testPage}}"
      - action: "wait_for_load_state"
        state: "domcontentloaded"
    
    assertions:
      - type: "response_status"
        expected: 200
        description: "Page loads successfully"
      - type: "element_visible"
        selector: "required-element-selector"
        description: "Critical element is visible"
      - type: "custom_assertion"
        function: "customAssertionFunction"
        parameters:
          param1: "value1"
        description: "Custom validation logic"
    
    cleanup:
      - action: "cleanup_page"
        description: "Clean up page resources"

error_handling:
  soft_assertions: true  # Continue testing after non-critical failures
  screenshot_on_failure: true
  video_on_failure: true
  trace_on_failure: true
  error_recovery:
    - error_type: "timeout"
      action: "wait_and_retry"
      max_attempts: 3
    - error_type: "element_not_found"
      action: "log_and_continue"

integration:
  reporting_reporting:
    include_steps: true
    include_attachments: true
    include_environment_info: true
  error_context:
    capture_browser_state: true
    capture_console_logs: true
    capture_network_logs: false