# WordPress Theme Elements Testing Specification
# Tests WordPress theme-specific elements and functionality

metadata:
  category: "wordpress-specific"
  version: "1.0.0"
  description: "Tests WordPress theme elements and responsive design"
  priority: "medium"
  dependencies: ["test-helpers", "site-loader", "wordpress-page-objects"]
  tags:
    - "wordpress-themes"
    - "theme-compatibility"
    - "responsive-design"

configuration:
  timeout: 25000
  retries: 2
  parallel: true
  browsers: ["chrome", "firefox", "safari"]
  viewports:
    - name: "desktop"
      width: 1920
      height: 1080
    - name: "tablet"
      width: 768
      height: 1024
    - name: "mobile"
      width: 375
      height: 667

theme_detection:
  methods:
    - body_class_analysis: "body[class*='theme-'], body[class*='wp-theme-']"
    - stylesheet_detection: "link[href*='/themes/']"
    - template_detection: "meta[name='generator'][content*='WordPress']"
  
  common_themes:
    - twenty_twenty_three: ".wp-site-blocks, .is-layout-"
    - twenty_twenty_two: ".wp-site-blocks"
    - twenty_twenty_one: ".has-global-padding"
    - astra: "body.astra-theme"
    - generatepress: "body.generatepress"
    - oceanwp: "body.oceanwp-theme"

test_cases:
  - name: "theme_detection_and_analysis"
    description: "Detect active theme and analyze its structure"
    priority: "medium"
    reporting:
      epic: "WordPress Themes"
      feature: "Theme Detection"
      story: "As a tester, I want to understand the active theme structure"
      severity: "normal"
    
    execution:
      homepage_only: true
      steps:
        - action: "detect_active_theme"
          methods: "{{themeDetection.methods}}"
          fallback_detection: true
          description: "Identify the active WordPress theme"
        
        - action: "analyze_theme_structure"
          analysis:
            - theme_type: "classic|block|hybrid"
            - layout_system: "flexbox|grid|float|table"
            - responsive_method: "media_queries|container_queries|fluid"
            - css_framework: "bootstrap|foundation|tailwind|custom"
          description: "Analyze theme architecture and approach"
        
        - action: "identify_theme_features"
          features:
            - gutenberg_support: "block editor compatibility"
            - customizer_options: "theme customization features"
            - widget_areas: "sidebar and footer widgets"
            - menu_locations: "navigation menu areas"
            - post_formats: "supported post formats"
          description: "Catalog theme features and capabilities"

  - name: "block_theme_testing"
    description: "Test block theme (FSE) specific functionality"
    priority: "medium"
    reporting:
      epic: "WordPress Themes"
      feature: "Block Themes"
      story: "As a user, I want block themes to render correctly"
      severity: "normal"
    
    execution:
      if: "block_theme_detected"
      sample_pages: 3
      steps:
        - action: "validate_block_structure"
          block_elements:
            - site_blocks: ".wp-site-blocks"
            - block_containers: ".wp-container"
            - layout_classes: "[class*='is-layout-']"
            - spacing_classes: "[class*='has-'] [class*='padding']"
          description: "Validate block theme markup structure"
        
        - action: "test_global_styles"
          global_style_features:
            - css_variables: "CSS custom properties usage"
            - color_palette: "theme color scheme"
            - typography_scale: "font size and family consistency"
            - spacing_scale: "consistent spacing values"
          description: "Test global styles implementation"
        
        - action: "test_block_patterns"
          if: "block_patterns_detected"
          pattern_tests:
            - pattern_rendering: "patterns display correctly"
            - pattern_responsiveness: "patterns adapt to viewports"
            - pattern_accessibility: "patterns maintain accessibility"
          description: "Test block pattern functionality"

  - name: "classic_theme_testing"
    description: "Test classic theme specific elements and functionality"
    priority: "medium"
    reporting:
      epic: "WordPress Themes"
      feature: "Classic Themes"
      story: "As a user, I want classic themes to function properly"
      severity: "normal"
    
    execution:
      if: "classic_theme_detected"
      sample_pages: 3
      steps:
        - action: "validate_template_hierarchy"
          template_elements:
            - header: "header.php template"
            - footer: "footer.php template"
            - sidebar: "sidebar.php template"
            - content_area: "main content area"
          description: "Validate classic theme template structure"
        
        - action: "test_widget_areas"
          widget_functionality:
            - sidebar_widgets: "sidebar widget rendering"
            - footer_widgets: "footer widget areas"
            - widget_responsiveness: "widget mobile adaptation"
          description: "Test widget area functionality"
        
        - action: "test_theme_hooks"
          wp_hooks:
            - wp_head: "proper wp_head() output"
            - wp_footer: "proper wp_footer() output"
            - body_class: "body_class() implementation"
            - post_class: "post_class() implementation"
          description: "Test WordPress theme hook implementation"

  - name: "responsive_design_testing"
    description: "Test theme responsive design across viewports"
    priority: "high"
    reporting:
      epic: "WordPress Themes"
      feature: "Responsive Design"
      story: "As a mobile user, I want themes to work on all devices"
      severity: "normal"
    
    execution:
      for_each_viewport: "{{configuration.viewports}}"
      sample_pages: 3
      steps:
        - action: "test_viewport_adaptation"
          viewport_tests:
            - layout_integrity: "layout doesn't break"
            - content_readability: "text remains readable"
            - navigation_usability: "navigation works on all devices"
            - image_responsiveness: "images scale appropriately"
          description: "Test theme adaptation to different viewports"
        
        - action: "test_mobile_navigation"
          if: "viewport === 'mobile'"
          mobile_nav_tests:
            - hamburger_menu: "mobile menu toggle functionality"
            - touch_interactions: "touch-friendly navigation"
            - menu_accessibility: "mobile menu keyboard navigation"
          description: "Test mobile-specific navigation features"
        
        - action: "test_typography_scaling"
          typography_tests:
            - font_size_scaling: "appropriate font sizes per viewport"
            - line_height_adjustment: "readable line spacing"
            - text_overflow_handling: "text wrapping and overflow"
          description: "Test typography responsiveness"

  - name: "theme_performance_testing"
    description: "Test theme performance and resource loading"
    priority: "low"
    reporting:
      epic: "WordPress Themes"
      feature: "Theme Performance"
      story: "As a user, I want fast-loading themes"
      severity: "minor"
    
    execution:
      sample_pages: 2
      steps:
        - action: "analyze_css_loading"
          css_analysis:
            - stylesheet_count: "number of CSS files"
            - css_size: "total CSS file size"
            - critical_css: "above-the-fold CSS optimization"
            - unused_css: "potential CSS bloat"
          description: "Analyze CSS loading and optimization"
        
        - action: "analyze_javascript_loading"
          js_analysis:
            - script_count: "number of JavaScript files"
            - js_size: "total JavaScript file size"
            - script_loading: "async/defer implementation"
            - jquery_dependency: "jQuery usage and version"
          description: "Analyze JavaScript loading patterns"
        
        - action: "test_image_optimization"
          image_tests:
            - lazy_loading: "image lazy loading implementation"
            - responsive_images: "srcset and sizes attributes"
            - image_formats: "modern image format usage"
            - alt_attributes: "accessibility compliance"
          description: "Test image optimization features"

assertions:
  critical:
    - "Theme renders correctly across all viewports"
    - "Navigation is functional on all devices"
    - "No theme-related JavaScript errors"
  
  normal:
    - "Theme structure follows WordPress standards"
    - "Responsive design adapts appropriately"
    - "Block themes implement global styles correctly"
    - "Classic themes use proper template hierarchy"
  
  minor:
    - "Theme performance is acceptable"
    - "CSS and JavaScript are optimized"
    - "Images are properly optimized"

error_handling:
  theme_detection_errors:
    - continue_with_generic_tests: true
    - log_detection_failures: true
    - use_fallback_detection: true
  
  viewport_testing_errors:
    - continue_with_remaining_viewports: true
    - handle_layout_shift_gracefully: true
    - screenshot_layout_issues: true

integration:
  reporting_reporting:
    attach_viewport_screenshots: true
    include_performance_metrics: true
    theme_analysis_report: true
  
  wordpress_integration:
    use_wp_page_objects: true
    handle_theme_variations: true
    leverage_wp_knowledge: true
  
  responsive_testing:
    compare_viewport_behavior: true
    identify_breakpoint_issues: true
    test_content_reflow: true